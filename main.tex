\documentclass[10pt]{article}
\usepackage[margin=1.0in]{geometry}

\usepackage[T1]{fontenc}


%%%
%%%  Lists
%%%
\usepackage{enumitem}
\setlist{itemsep=0.5ex,parsep=0pt}             % more compact lists

%%%
\usepackage{fancyhdr}
\usepackage{xspace}
%\usepackage{enumerate}
\usepackage{verbatim}
\usepackage{url}
\usepackage{latexsym,amsthm,amsmath,amsfonts,amssymb,stmaryrd,mathtools}

\usepackage[usenames]{color}
\usepackage{graphicx}
\usepackage{syntax}
\usepackage[retainorgcmds]{IEEEtrantools}
\usepackage{lipsum}
\usepackage{listings}
\usepackage{wrapfig}
\usepackage{subfig}
\usepackage{adjustbox}
\usepackage[british]{babel}

\lstdefinelanguage{pcpp}{%
  language     = C++,
  morekeywords = {if,let,then,else,with,in},
  keywordstyle=\ttfamily\bfseries
}

%%%
%%%  Tables
%%%
\usepackage{booktabs}
%\usepackage{color}
\usepackage[usenames,dvipsnames]{xcolor}
\usepackage{colortbl}
\usepackage{multirow}
\usepackage{supertabular}
%%%

\usepackage{amsthm}

\newtheorem{theorem}{Theorem}[section]
\newtheorem{corollary}{Corollary}[theorem]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{definition}{Definition}[section]
\newtheorem{invariant}{Invariant}[section]
\newtheorem{property}{Property}[section]

\newcommand{\pcvar}[1]{\mathtt{#1}}

\usepackage[colorlinks,
citecolor=Sepia,
linkcolor=Blue,
pagebackref=true    
%pagebackref=true      turn this on and off for citation back references.
]{hyperref}%         % for online version

\usepackage{natbib}
\usepackage{url}

\usepackage{txfonts}

%\input{mac}
\input{local} % loads lstlisting settings
\input{local2}

\lstdefinestyle{nonumbers}
{numbers=none}

\newcommand{\pt}[1]{\noindent
  {\color{blue}{\textbf{Point.}#1}}\smallskip}
\newcommand{\q}[1]{\noindent {\color{red}{\textbf{Question:} #1}}\smallskip}

\title{Flexible chunked sequences from simple rules}
\author{}

%%% this package has to be right before begin{doc}
\usepackage{microtype}
\begin{document}

\maketitle

%******************************************************************************
\section{Introduction}

\paragraph{Sequence notation.} We are going to use the usual mathematical
notation for sequences: the sequence $xs = [x_0, \ldots, x_n]$
contains $n + 1$ elements, starting with $x_0$ and ending with
$x_n$. Given two sequences, $xs = [x_0, \ldots, x_n]$ and $xs = [y_0,
  \ldots, y_m]$, we denote the concatenation by $xs \oplus ys = [x_0,
  \ldots, x_n, y_0, \ldots, y_m]$.

\begin{lstlisting}[language=pcpp,style=nonumbers]

\end{lstlisting}

\begin{figure}
  \begin{center}
    \begin{tabular}{>{$}l<{$}>{$}c<{$}>{$}l<{$}>{$}c<{$}>{$}l<{$}>{$}c<{$}>{$}l<{$}}

  \speccode{empty}  & : & \tychunkedseq{\alpha} & = & []\\
      
  \speccode{push\_front} \, xs \, x & : & \tychunkedseq{\alpha} \rightarrow \alpha & = & [x] \oplus xs \\
  & & \quad \rightarrow \tychunkedseq{\alpha} & & \\
  & \multicolumn{2}{l}{$\text{where} \, w' = \delta x + w$} \\
  
  \speccode{pop\_front} \, xs & : & \tychunkedseq{\alpha} & = & \left\{
  \begin{array}{l l}
    xs' & \quad \text{if}\ xs = [x] \oplus xs' \\
    \bot & \quad \text{otherwise}
  \end{array} \right. \\
  & & \quad \rightarrow ((\alpha \times \tychunkedseq{\alpha}) \cup \{ \bot \}) & & \\

  \speccode{push\_back} \, xs \, x & : & \tychunkedseq{\alpha} \rightarrow \alpha & = & xs \oplus [x]\\
  & & \quad \rightarrow (\tychunkedseq{\alpha} \cup \{ \bot \}) & & \\
  
  \speccode{pop\_back} \, xs & : & \tychunkedseq{\alpha} & = & \left\{
  \begin{array}{l l}
    xs' & \quad \text{if}\ xs = xs' \oplus [x] \\
    \bot & \quad \text{otherwise}
  \end{array} \right. \\
  & & \quad \rightarrow ((\alpha \times \tychunkedseq{\alpha}) \cup \{ \bot \}) & & \\

  \speccode{concat} \, xs_1 \, xs_2 & : & \tychunkedseq{\alpha} \rightarrow \tychunkedseq{\alpha} & = & xs_1 \oplus xs_2 \\
  & & \quad \rightarrow \tychunkedseq{\alpha} & & \\

  \speccode{split} \, xs \, i & : & \tychunkedseq{\alpha} \rightarrow \tyname{N} & = & \left\{
  \begin{array}{l l}
    (xs_1, x, xs_2) & \quad \text{if}\ xs = xs_1 \oplus [x_i] \oplus xs_2 \\
    \bot & \quad \text{otherwise}
  \end{array} \right. \\
  & & \quad \rightarrow (\tysplitchunkedseq{\alpha} \cup \{ \bot \}) & & \\

\end{tabular}
  \end{center}
    \begin{displaymath}
    \text{where} \, \tysplitchunkedseq{\alpha} = (\tychunkedseq{\alpha} \times \alpha \times \tychunkedseq{\alpha})
  \end{displaymath}
  \caption{Specification of chunked sequences.}
\label{fig:chunkedseq-specification}
\end{figure}

\begin{figure}
  \begin{center}
    \begin{tabular}{>{$}l<{$}>{$}c<{$}>{$}l<{$}>{$}c<{$}>{$}l<{$}>{$}c<{$}>{$}l<{$}}

  \speccode{empty}  & : & \tychunk{\alpha}{K} & = & []\\
      
  \speccode{push\_front} \, \delta \, (w, xs) \, x & : & \tywf{\alpha} \rightarrow \tychunk{\alpha}{K} \rightarrow \alpha & = & \left\{
  \begin{array}{l l}
    (w', [x] \oplus xs) & \quad \text{if}\ |xs| < K \\
    \bot & \quad \text{otherwise}
  \end{array} \right. \\
  & & \quad \rightarrow (\tychunk{\alpha}{K} \cup \{ \bot \}) & & \\
  & \multicolumn{2}{l}{$\text{where} \, w' = \delta x + w$} \\
  
  \speccode{pop\_front} \, \delta \, (w, xs) & : & \tywf{\alpha} \rightarrow \tychunk{\alpha}{K} & = & \left\{
  \begin{array}{l l}
    (w', xs') & \quad \text{if}\ xs = [x] \oplus xs' \\
    \bot & \quad \text{otherwise}
  \end{array} \right. \\
  & & \quad \rightarrow ((\alpha \times \tychunk{\alpha}{K}) \cup \{ \bot \}) & & \\
  & \multicolumn{2}{l}{$\text{where} \, w' = w - \delta x$} \\

  \speccode{push\_back} \, \delta \, (w, xs) \, x & : & \tywf{\alpha} \rightarrow \tychunk{\alpha}{K} \rightarrow \alpha & = & \left\{
  \begin{array}{l l}
    (w', xs \oplus [x]) & \quad \text{if}\ |xs| < K \\
    \bot & \quad \text{otherwise}
  \end{array} \right. \\
  & & \quad \rightarrow (\tychunk{\alpha}{K} \cup \{ \bot \}) & & \\
  & \multicolumn{2}{l}{$\text{where} \, w' = \delta x + w$} \\
  
  \speccode{pop\_back} \, \delta \, (w, xs) & : & \tywf{\alpha} \rightarrow \tychunk{\alpha}{K} & = & \left\{
  \begin{array}{l l}
    (w', xs') & \quad \text{if}\ xs = xs' \oplus [x] \\
    \bot & \quad \text{otherwise}
  \end{array} \right. \\
  & & \quad \rightarrow ((\alpha \times \tychunk{\alpha}{K}) \cup \{ \bot \}) & & \\
  & \multicolumn{2}{l}{$\text{where} \, w' = w - \delta x$} \\

  \speccode{concat} \, \delta \, (w_1, xs_1) \, (w_2, xs_2) & : & \tywf{\alpha} \rightarrow \tychunk{\alpha}{K} \rightarrow \tychunk{\alpha}{K} & = & \left\{
  \begin{array}{l l}
    (w', xs_1 \oplus xs_2) & \quad \text{if}\ |xs_1| + |xs_2| \leq K \\
    \bot & \quad \text{otherwise}
  \end{array} \right. \\
  & & \quad \rightarrow (\tychunk{\alpha}{K} \cup \{ \bot \}) & & \\
  & \multicolumn{2}{l}{$\text{where} \, w' = w_1 + w_2$} \\

  \speccode{split} \, \delta \, (w, xs_1 \oplus [x] \oplus xs_2) \, i & : & \tywf{\alpha} \rightarrow \tychunk{\alpha}{K} \rightarrow \tyname{N} & = & \left\{
  \begin{array}{l l}
    ((w_1, xs_1), x, (w_2, xs_2)) & \quad \text{if}\ w_1 \leq i < w_1 + \delta x \\
    \bot & \quad \text{otherwise}
  \end{array} \right. \\
  & & \quad \rightarrow (\tysplitchunk{\alpha}{K} \cup \{ \bot \}) & & \\
  & \multicolumn{3}{l}{$\text{where} \, w_1 = \Sigma_{x \in xs_1} \, \delta x \, \text{and} \, w_2 = \Sigma_{x \in xs_2} \, \delta x$} \\

\end{tabular}
  \end{center}
  \begin{displaymath}
    \text{where} \, \tysplitchunk{\alpha}{K} = (\tychunk{\alpha}{K} \times \alpha \times \tychunk{\alpha}{K})
  \end{displaymath}
  \caption{Specification of chunks.}
\label{fig:chunk-specification}
\end{figure}

\bibliographystyle{plain}
\bibliography{biblio}

\end{document}
